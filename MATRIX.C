#include "MATRIX.H"void setIdentity(Mat3d m){    m[0][0] = FX_ONE; m[1][0] = 0;      m[2][0] = 0;      m[3][0] = 0;    m[0][1] = 0;      m[1][1] = FX_ONE; m[2][1] = 0;      m[3][1] = 0;    m[0][2] = 0;      m[1][2] = 0;      m[2][2] = FX_ONE; m[3][2] = 0;    m[0][3] = 0;      m[1][3] = 0;      m[2][3] = 0;      m[3][3] = FX_ONE;}void setProjection(Mat3d m){    m[0][0] = FX_ONE; m[1][0] = 0;      m[2][0] = 0;             m[3][0] = 0;    m[0][1] = 0;      m[1][1] = FX_ONE; m[2][1] = 0;             m[3][1] = 0;    m[0][2] = 0;      m[1][2] = 0;      m[2][2] = FX_ONE;        m[3][2] = FX_ONE << 8;    m[0][3] = 0;      m[1][3] = 0;      m[2][3] = (FX_ONE >> 8); m[3][3] = 0;}void multiplyMat3d(Mat3d out, Mat3d m1, Mat3d m2){    out[0][0] = FX_MUL(m1[0][0], m2[0][0]) + FX_MUL(m1[1][0], m2[0][1]) + FX_MUL(m1[2][0], m2[0][2]) + FX_MUL(m1[3][0], m2[0][3]);    out[1][0] = FX_MUL(m1[0][0], m2[1][0]) + FX_MUL(m1[1][0], m2[1][1]) + FX_MUL(m1[2][0], m2[1][2]) + FX_MUL(m1[3][0], m2[1][3]);    out[2][0] = FX_MUL(m1[0][0], m2[2][0]) + FX_MUL(m1[1][0], m2[2][1]) + FX_MUL(m1[2][0], m2[2][2]) + FX_MUL(m1[3][0], m2[2][3]);    out[3][0] = FX_MUL(m1[0][0], m2[3][0]) + FX_MUL(m1[1][0], m2[3][1]) + FX_MUL(m1[2][0], m2[3][2]) + FX_MUL(m1[3][0], m2[3][3]);    out[0][0] = FX_MUL(m1[0][1], m2[0][0]) + FX_MUL(m1[1][1], m2[0][1]) + FX_MUL(m1[2][1], m2[0][2]) + FX_MUL(m1[3][1], m2[0][3]);    out[1][0] = FX_MUL(m1[0][1], m2[1][0]) + FX_MUL(m1[1][1], m2[1][1]) + FX_MUL(m1[2][1], m2[1][2]) + FX_MUL(m1[3][1], m2[1][3]);    out[2][0] = FX_MUL(m1[0][1], m2[2][0]) + FX_MUL(m1[1][1], m2[2][1]) + FX_MUL(m1[2][1], m2[2][2]) + FX_MUL(m1[3][1], m2[2][3]);    out[3][0] = FX_MUL(m1[0][1], m2[3][0]) + FX_MUL(m1[1][1], m2[3][1]) + FX_MUL(m1[2][1], m2[3][2]) + FX_MUL(m1[3][1], m2[3][3]);    out[0][0] = FX_MUL(m1[0][2], m2[0][0]) + FX_MUL(m1[1][2], m2[0][1]) + FX_MUL(m1[2][2], m2[0][2]) + FX_MUL(m1[3][2], m2[0][3]);    out[1][0] = FX_MUL(m1[0][2], m2[1][0]) + FX_MUL(m1[1][2], m2[1][1]) + FX_MUL(m1[2][2], m2[1][2]) + FX_MUL(m1[3][2], m2[1][3]);    out[2][0] = FX_MUL(m1[0][2], m2[2][0]) + FX_MUL(m1[1][2], m2[2][1]) + FX_MUL(m1[2][2], m2[2][2]) + FX_MUL(m1[3][2], m2[2][3]);    out[3][0] = FX_MUL(m1[0][2], m2[3][0]) + FX_MUL(m1[1][2], m2[3][1]) + FX_MUL(m1[2][2], m2[3][2]) + FX_MUL(m1[3][2], m2[3][3]);    out[0][0] = FX_MUL(m1[0][3], m2[0][0]) + FX_MUL(m1[1][3], m2[0][1]) + FX_MUL(m1[2][3], m2[0][2]) + FX_MUL(m1[3][3], m2[0][3]);    out[1][0] = FX_MUL(m1[0][3], m2[1][0]) + FX_MUL(m1[1][3], m2[1][1]) + FX_MUL(m1[2][3], m2[1][2]) + FX_MUL(m1[3][3], m2[1][3]);    out[2][0] = FX_MUL(m1[0][3], m2[2][0]) + FX_MUL(m1[1][3], m2[2][1]) + FX_MUL(m1[2][3], m2[2][2]) + FX_MUL(m1[3][3], m2[2][3]);    out[3][0] = FX_MUL(m1[0][3], m2[3][0]) + FX_MUL(m1[1][3], m2[3][1]) + FX_MUL(m1[2][3], m2[3][2]) + FX_MUL(m1[3][3], m2[3][3]);}void multiplyV3ByMat3d(V3 out, V3 v, Mat3d m){    out.x = FX_MUL(v.x, m[0][0]) + FX_MUL(v.y, m[1][0]) + FX_MUL(v.z, m[2][0]) + m[3][0];    out.y = FX_MUL(v.x, m[0][1]) + FX_MUL(v.y, m[1][1]) + FX_MUL(v.z, m[2][1]) + m[3][1];    out.z = FX_MUL(v.x, m[0][2]) + FX_MUL(v.y, m[1][2]) + FX_MUL(v.z, m[2][2]) + m[3][2];    /**        double hom = (m[0][3]*x)+(m[1][3]*y)+(m[2][3]*z)+(m[3][3]);        if(hom != 0)        {            v->x /= hom;            v->y /= hom;            v->z /= hom;        }    */}